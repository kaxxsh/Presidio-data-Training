#### 8/11/24; 2:44:38 PM by DW

Well we are now in the publishing business. We should work here at least for the rest of the month of August and get something that works realllll nice like.

https://userland.scripting.com/dave.winer@gmail.com/2024/08/10/39678.html

#### 8/8/24; 10:02:22 AM by DW

I want to write publicly using this outliner asap. 

A command that creates a new post.

You can organize however you like.

Each story is stored in the database as a file?

When you hit the airplane icon your changes to the current story are published.

Each published story has it's own link and page. 

It can include references to other stories, indicated by URLs, but you can't see a list of stories that link to this post. 

No vector for spam or abuse. You have to deliver the readers to your posts, you can't hijack flow from others.

Fundamental different flow from twitter-like systems.

When a story is published it is also added to the AI language model.

#### 8/7/24; 10:50:51 AM by DW

update storage set flprivate = 0 where id = 23;

http://userland.scripting.com/dave.winer@gmail.com/outliner.opml



move userland.scripting.com to maine -- an https server

https://userland.scripting.com/dave.winer@gmail.com/testStruct1.json







#### 8/6/24; 5:21:39 PM by DW

Adding support for serving public files.

This URL now works.

http://userland.scripting.com/dave.winer@gmail.com/testStruct1.json

config.domainPublicUserFiles must be set to userland.scripting.com.

#### 7/29/24; 12:34:25 PM by DW

I've got the new version running on userland.scripting.com.

There's a problem logging on to the home page, and that's where we'll pick it up at the next session.

But the texteditor app works with the remote server, and the storage is working there too.

So congrats dave! :-)

#### 7/29/24; 12:15:34 PM by DW

At some point not too distant future, I'd like to add appname field to the storage table. And it would become part of the key for a file. 

So you could have a prefs.json file for your outliner and your text editor and they wouldn't interfere with each other.

Right now that's too much digging to do, but I did make sure that the main part of userland server passes the appname to the function its calling here in storage, so we can add it later, if we get there.

#### 7/29/24; 10:35:46 AM by DW

functions that take id as a param: readFile, updateFile, deleteFile.

they all take username params

add to the username value to the query

for example -- 

select * from storage where id = 20; becomes

select * from storage where id = 20 and username = 'dave.winer@gmail.com';

#### 7/28/24; 12:22:22 PM by DW

The type, if not specified, should be a function of the file extension.

A query to show basic status info about the storage table

select id, username, relpath, char_length(filecontents) as size, flprivate, type, whencreated, whenupdated, ctupdates from storage;

#### 7/20/24; 9:19:50 AM by DW

Hooking it into userland.

Export new function -- handleHttpRequest, returns true if we handled the event. 

New config value -- domainPublicUserFiles -- if set, the domain we use for access to public storage files.

#### 7/20/24; 12:04:04 PM by DW

Releasing it as a package.

#### 7/19/24; 8:36:11 AM by DW

servePublicFile

#### 7/18/24; 4:59:59 PM by DW

whenUpdated is not updating

ctsaves ==> ctupdates

readme.md, explain what each of the verbs does

how to connect to an identity system

#### 7/17/24; 11:31:58 AM by DW

"update storage set , ctSaves = ctSaves + 1 where id = 13;"

#### 7/16/24; 12:47:16 PM by DW



added metadata column to the storage table. works like refcon for macintosh objects in the old os and the resource fork of mac files. A place that any app can store data to, through a new entry point.

next up -- for writing files, an options struct. we're always adding them later, let's put it in at the beginning.



#### 7/14/24; 11:20:27 AM by DW

Factoring this out of wpidentity.

Where it has the idea of storage that's connected to blog posts, we don't do that. 

We identify storage with an id or a path.

A file has attributes -- flprivate, type.

What we removed from this storage system that's present in wpidentity:

token -- it's replaced with username

idsite, idpost -- we're not attaching to wordpress documents

iddraft is replaced by idfile

create database tmpforsimplestorage character set utf8mb4 collate utf8mb4_unicode_ci;

create table storage (

id int auto_increment primary key, 

username varchar (255) not null default '', 

relpath varchar (255) not null default '', 

flprivate boolean not null default true,

type varchar (64) not null default 'application/json',

filecontents text not null,

whenCreated datetime not null default current_timestamp, 

whenUpdated datetime not null default current_timestamp on update current_timestamp, 

ctUpdates int unsigned not null default 0,

metadata json not null default (json_object()),

unique key (username, relpath)

);

